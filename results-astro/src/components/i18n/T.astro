---
import { TK_ATTR } from "./attributes";
const { i18n } = Astro.locals;
const { token, values, html } = Astro.props;
interface Props {
  /** Can be a token expression see React T version */
  token: string;
  values?: Record<string, string>;
  html?: boolean;
}
const res = i18n.t(token, values);
// the data-dg-tk parameter is used by the translation mode

// TODO: we should be able to use token expressions here,
// in order to stay consistent with the frontend
// like "{{surveyId}}.foobar"
// Since we are server-side, we can easily access the full context and replace {{surveyId}} with the right value
// we don't need something as elaborate than client-side, which also needs filtering
---

<span {...{ [TK_ATTR]: token }}
  >Astro translation key {html ? res.tHtml : res.t}</span
>
